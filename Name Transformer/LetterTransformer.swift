import Foundation

struct LetterTransformer {
    static let similarLetters: [Character: [[Character]]] = [
        // Uppercase letters
        "A": [["Î‘", "Ä„", "Èº"], ["Ğ", "Ä€", "Ä‚"]],
        "B": [["Î’", "á¸‚", "á¸„"], ["Ğ’", "Æ", "á¸†"]],
        "C": [["Ï¹", "ÄŠ", "á¸ˆ"], ["Ğ¡", "Ã‡", "Ä†"]],
        "D": [["Ä", "á¸Š", "á¸Œ"], ["Ã", "Ä", "ÆŠ"]],
        "E": [["Î•", "Ä˜", "á¸–"], ["Ğ•", "Ä’", "Ä–"]],
        "F": [["Ïœ", "Æ‘", "á¸"], ["Ğ¤", "á¸", "Æ‘"]],
        "G": [["Ä¢", "Ç¤", "á¸ "], ["Ä", "Ä ", "Ç¦"]],
        "H": [["Î—", "Ä¦", "á¸¢"], ["Ğ", "Ä¤", "á¸¤"]],
        "I": [["Î™", "Ä®", "á¸¬"], ["Ğ†", "Äª", "Ä¬"]],
        "J": [["Ğˆ", "Ä´", "Éˆ"], ["Ğˆ", "Éˆ", "Ä´"]],
        "K": [["Îš", "Ä¶", "á¸²"], ["Ğš", "Ç¨", "á¸´"]],
        "L": [["Ä»", "á¸¶", "á¸º"], ["Å", "Ä¹", "á¸¼"]],
        "M": [["Îœ", "á¹€", "á¹‚"], ["Ğœ", "á¸¾", "á¹€"]],
        "N": [["Î", "Å…", "á¹„"], ["Ğ", "Åƒ", "Å‡"]],
        "O": [["ÎŸ", "Çª", "È®"], ["Ğ", "ÅŒ", "Å"]],
        "P": [["Î¡", "á¹–", "á¹”"], ["Ğ ", "Æ¤", "á¹–"]],
        "Q": [["Ôš", "ÉŠ", "Çª"], ["Ôš", "ÉŠ", "Q"]],
        "R": [["Å”", "á¹˜", "á¹š"], ["Å˜", "Å–", "á¹œ"]],
        "S": [["Ğ…", "á¹ ", "á¹¢"], ["Åš", "Åœ", "È˜"]],
        "T": [["Î¤", "á¹ª", "á¹¬"], ["Ğ¢", "Å¤", "Èš"]],
        "U": [["Î¥", "Å²", "á¹²"], ["Ğ£", "Åª", "Å®"]],
        "V": [["Ñ´", "á¹¾", "Ñ¶"], ["Ğ’", "Ñ´", "á¹¼"]],
        "W": [["Ôœ", "áº‚", "áº„"], ["Å´", "áº€", "áº†"]],
        "X": [["Î§", "áºŠ", "áºŒ"], ["Ğ¥", "áºŠ", "áºŒ"]],
        "Y": [["Î¥", "áº", "á»´"], ["Ğ£", "Å¶", "á»¸"]],
        "Z": [["Î–", "Å»", "áº’"], ["Ğ—", "Å¹", "Å½"]],
        
        // Lowercase letters
        "a": [["Î±", "Ä…", "â±¥"], ["Ğ°", "Ä", "Äƒ"]],
        "b": [["Î²", "á¸ƒ", "á¸…"], ["Ğ²", "É“", "á¸‡"]],
        "c": [["Ï²", "Ä‹", "á¸‰"], ["Ñ", "Ã§", "Ä‡"]],
        "d": [["Ä", "á¸‹", "á¸"], ["Ã°", "Ä‘", "É—"]],
        "e": [["Îµ", "Ä™", "á¸—"], ["Ğµ", "Ä“", "Ä—"]],
        "f": [["Ï", "Æ’", "á¸Ÿ"], ["Ñ„", "á¸Ÿ", "Æ’"]],
        "g": [["Ä£", "Ç¥", "á¸¡"], ["ÄŸ", "Ä¡", "Ç§"]],
        "h": [["Î·", "Ä§", "á¸£"], ["Ğ½", "Ä¥", "á¸¥"]],
        "i": [["Î¹", "Ä¯", "á¸­"], ["Ñ–", "Ä«", "Ä­"]],
        "j": [["Ñ˜", "Äµ", "É‰"], ["Ñ˜", "É‰", "Äµ"]],
        "k": [["Îº", "Ä·", "á¸³"], ["Ğº", "Ç©", "á¸µ"]],
        "l": [["Ä¼", "á¸·", "á¸»"], ["Å‚", "Äº", "á¸½"]],
        "m": [["Î¼", "á¹", "á¹ƒ"], ["Ğ¼", "á¸¿", "á¹"]],
        "n": [["Î½", "Å†", "á¹…"], ["Ğ½", "Å„", "Åˆ"]],
        "o": [["Î¿", "Ç«", "È¯"], ["Ğ¾", "Å", "Å‘"]],
        "p": [["Ï", "á¹—", "á¹•"], ["Ñ€", "Æ¥", "á¹—"]],
        "q": [["Ô›", "É‹", "Ç«"], ["Ô›", "É‹", "q"]],
        "r": [["Å•", "á¹™", "á¹›"], ["Å™", "Å—", "á¹"]],
        "s": [["Ñ•", "á¹¡", "á¹£"], ["Å›", "Å", "È™"]],
        "t": [["Ï„", "á¹«", "á¹­"], ["Ñ‚", "Å¥", "È›"]],
        "u": [["Ï…", "Å³", "á¹³"], ["Ñƒ", "Å«", "Å¯"]],
        "v": [["Ñµ", "á¹¿", "Ñ·"], ["Ğ²", "Ñµ", "á¹½"]],
        "w": [["Ï‰", "áºƒ", "áº…"], ["Åµ", "áº", "áº‡"]],
        "x": [["Ï‡", "áº‹", "áº"], ["Ñ…", "áº‹", "áº"]],
        "y": [["Ñƒ", "áº", "á»µ"], ["Ñƒ", "Å·", "á»¹"]],
        "z": [["Î¶", "Å¼", "áº“"], ["Ğ·", "Åº", "Å¾"]],
        
        // Numbers
        "0": [["â“ª", "â“¿", "ğŸ"], ["ğŸ¢", "ğŸ¬", "ğŸ¶"]],
        "1": [["â‘ ", "â“µ", "ğŸ"], ["ğŸ£", "ğŸ­", "ğŸ·"]],
        "2": [["â‘¡", "â“¶", "ğŸ"], ["ğŸ¤", "ğŸ®", "ğŸ¸"]],
        "3": [["â‘¢", "â“·", "ğŸ‘"], ["ğŸ¥", "ğŸ¯", "ğŸ¹"]],
        "4": [["â‘£", "â“¸", "ğŸ’"], ["ğŸ¦", "ğŸ°", "ğŸº"]],
        "5": [["â‘¤", "â“¹", "ğŸ“"], ["ğŸ§", "ğŸ±", "ğŸ»"]],
        "6": [["â‘¥", "â“º", "ğŸ”"], ["ğŸ¨", "ğŸ²", "ğŸ¼"]],
        "7": [["â‘¦", "â“»", "ğŸ•"], ["ğŸ©", "ğŸ³", "ğŸ½"]],
        "8": [["â‘§", "â“¼", "ğŸ–"], ["ğŸª", "ğŸ´", "ğŸ¾"]],
        "9": [["â‘¨", "â“½", "ğŸ—"], ["ğŸ«", "ğŸµ", "ğŸ¿"]],
        
        // Special Characters
        ".": [["â€¤", "ã€‚", "ï½¡"], ["ï¼", "Â·", "âˆ™"]],
        ",": [["ØŒ", "ã€", "ï¸"], ["ï¼Œ", "á£", "â¸²"]],
        "!": [["Çƒ", "â—", "êœ"], ["ï¼", "â€¼", "â£"]],
        "?": [["â“", "ï¼Ÿ", "ØŸ"], ["â‡", "â”", "ê˜"]],
        "@": [["ï¼ ", "â’œ", "â“"], ["@", "ï¹«", "â˜¯"]],
        "#": [["ï¼ƒ", "â™¯", "âŒ—"], ["#", "â‹•", "â¨³"]],
        "$": [["ï¼„", "â‚®", "â‚¯"], ["$", "â‚«", "â‚´"]],
        "%": [["ï¼…", "â’", "Ùª"], ["%", "âŒ˜", "âŒ—"]],
        "&": [["ï¼†", "ï¹ ", "ï¼†"], ["&", "â…‹", "â„†"]],
        "*": [["ï¼Š", "â‹†", "âœ±"], ["*", "âœ²", "âœ³"]]
    ]
    
    static func transform(_ input: String, index: Int) -> String {
        return String(input.map { char in
            if let alternatives = similarLetters[char] {
                let variantSet = alternatives[index % alternatives.count]
                return variantSet[Int.random(in: 0..<variantSet.count)]
            }
            return char
        })
    }
} 